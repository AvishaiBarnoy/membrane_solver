meta:
  version: v1
items:
  - id: tensionless_gamma_zero
    required: true
    theory_statement: "Tensionless parity lane sets gamma=0."
    tex_markers: ["gamma=0"]
    code_refs:
      - path: modules/constraints/rim_slope_match_out.py
        contains: "(gamma=0)"
    yaml_checks:
      - kind: path_equals
        path: global_parameters.surface_tension
        expected: 0.0

  - id: leaflet_elastic_terms_present
    required: true
    theory_statement: "Inner/outer leaflet elastic terms are enabled."
    tex_markers: ["F_{\\rm in}", "F_{\\rm out}"]
    code_refs:
      - path: modules/energy/tilt_in.py
        contains: tilt_modulus_in
      - path: modules/energy/tilt_out.py
        contains: tilt_modulus_out
      - path: modules/energy/bending_tilt_in.py
        contains: bending_modulus_in
      - path: modules/energy/bending_tilt_out.py
        contains: bending_modulus_out
    yaml_checks:
      - kind: list_contains
        path: energy_modules
        expected: tilt_in
      - kind: list_contains
        path: energy_modules
        expected: tilt_out
      - kind: list_contains
        path: energy_modules
        expected: bending_tilt_in
      - kind: list_contains
        path: energy_modules
        expected: bending_tilt_out

  - id: rim_and_thetaB_constraints_present
    required: true
    theory_statement: "Rim matching and boundary thetaB constraints are active."
    tex_markers: ["Boundary matching (1D-style continuation)."]
    code_refs:
      - path: modules/constraints/rim_slope_match_out.py
        contains: "t_out · r_hat = phi"
      - path: modules/constraints/tilt_thetaB_boundary_in.py
        contains: "t_in · r_hat = thetaB"
    yaml_checks:
      - kind: list_contains
        path: constraint_modules
        expected: rim_slope_match_out
      - kind: list_contains
        path: constraint_modules
        expected: tilt_thetaB_boundary_in

  - id: linear_contact_work_term
    required: true
    theory_statement: "Contact work term is linear in thetaB."
    tex_markers: ["F_{\\rm cont}=-2\\pi R"]
    code_refs:
      - path: modules/energy/tilt_thetaB_contact_in.py
        contains: "-2.0 * np.pi * R_eff * gamma * theta_B"
    yaml_checks:
      - kind: list_contains
        path: energy_modules
        expected: tilt_thetaB_contact_in
      - kind: path_equals
        path: global_parameters.tilt_thetaB_contact_penalty_mode
        expected: "off"
      - kind: path_exists
        path: global_parameters.tilt_thetaB_contact_strength_in

  - id: analytical_theta_star_reporting
    required: true
    theory_statement: "Parity report computes theta_B^opt and ratio terms."
    tex_markers: ["theta_B^{\\rm opt}"]
    code_refs:
      - path: tools/reproduce_theory_parity.py
        contains: thetaB_star
      - path: tools/reproduce_theory_parity.py
        contains: "special.iv(0, x) / special.iv(1, x)"
      - path: tools/reproduce_theory_parity.py
        contains: "special.kv(0, x) / special.kv(1, x)"
    yaml_checks:
      - kind: path_equals
        path: global_parameters.tilt_thetaB_optimize
        expected: true
