global_parameters:
  surface_tension: 0.001
  bending_energy_model: helfrich
  spontaneous_curvature: 0.0
  leaflet_out_absence_mode: triangles
  bending_modulus_in: 1.0
  bending_modulus_out: 1.0
  tilt_modulus_in: 225.0
  tilt_modulus_out: 225.0
  tilt_thetaB_group_in: rim
  tilt_thetaB_contact_penalty_mode: "off"
  tilt_thetaB_strength_in: 1.0e8
  tilt_thetaB_contact_strength_in: 4.286
  tilt_thetaB_value: 0.0
  tilt_thetaB_center: [0.0, 0.0, 0.0]
  tilt_thetaB_normal: [0.0, 0.0, 1.0]
  tilt_thetaB_optimize: true
  tilt_thetaB_optimize_every: 1
  tilt_thetaB_optimize_delta: 0.03
  tilt_thetaB_optimize_inner_steps: 10
  bending_tilt_base_term_boundary_group_in: rim
  bending_tilt_base_term_boundary_group_out: rim
  bending_tilt_assume_J0_presets_in:
    - disk_left
    - disk_right
  rim_slope_match_thetaB_param: tilt_thetaB_value
  rim_slope_match_group: rim
  rim_slope_match_outer_group: outer
  rim_slope_match_disk_group: rim
  rim_slope_match_strength: 0.1
  rim_slope_match_center: [0.0, 0.0, 0.0]
  rim_slope_match_normal: [0.0, 0.0, 1.0]
  tilt_solve_mode: coupled
  tilt_step_size: 0.15
  tilt_inner_steps: 3
  tilt_tol: 1.0e-10
  line_search_reduced_energy: true
  line_search_reduced_tilt_inner_steps: 0
  step_size: 0.01
  step_size_mode: fixed
  pin_to_plane_normal: [0.0, 0.0, 1.0]
  pin_to_plane_point: [0.0, 0.0, 0.0]
  leaflet_out_absent_presets:
    - disk_left
    - disk_right

constraint_modules:
  - pin_to_circle
  - pin_to_plane
  - rim_slope_match_out
  - tilt_thetaB_boundary_in

energy_modules:
  - bending_tilt_in
  - bending_tilt_out
  - tilt_in
  - tilt_out
  - tilt_thetaB_contact_in

definitions:
  disk_left:
    constraints: [pin_to_circle, pin_to_plane]
    pin_to_circle_group: disk_left
    pin_to_circle_radius: 0.7071067811865476
    pin_to_circle_normal: [0.0, 0.0, 1.0]
    pin_to_circle_point: [3.0, 3.0, 0.0]
    pin_to_circle_mode: fixed
  disk_right:
    constraints: [pin_to_circle, pin_to_plane]
    pin_to_circle_group: disk_right
    pin_to_circle_radius: 0.7071067811865476
    pin_to_circle_normal: [0.0, 0.0, 1.0]
    pin_to_circle_point: [9.0, 3.0, 0.0]
    pin_to_circle_mode: fixed
  rim:
    constraints: []
    rim_slope_match_group: rim
    tilt_thetaB_group_in: rim
  outer_rim:
    constraints: [fixed, pin_to_plane, pin_to_circle]
    fixed: true
    rim_slope_match_group: outer
    pin_to_plane_normal: [0.0, 0.0, 1.0]
    pin_to_plane_point: [6.0, 3.0, 0.0]
    pin_to_circle_group: outer
    pin_to_circle_radius: 15.0
    pin_to_circle_normal: [0.0, 0.0, 1.0]
    pin_to_circle_point: [6.0, 3.0, 0.0]
    pin_to_circle_mode: fixed


vertices:
  1: [-6.99038105676658, -4.5, 0.0, {preset: outer_rim}]
  2: [-6.99038105676658, 10.5, 0.0, {preset: outer_rim}]
  3: [6.0, 18.0, 0.0, {preset: outer_rim}]
  4: [18.99038105676658, 10.5, 0.0, {preset: outer_rim}]
  5: [18.99038105676658, -4.5, 0.0, {preset: outer_rim}]
  6: [6.0, -12.0, 0.0, {preset: outer_rim}]
  7: [2.5, 2.5, 0, {preset: disk_left, rim_slope_match_group: rim, tilt_thetaB_group_in: rim}]
  8: [2.5, 3.5, 0, {preset: disk_left, rim_slope_match_group: rim, tilt_thetaB_group_in: rim}]
  9: [3.5, 3.5, 0, {preset: disk_left, rim_slope_match_group: rim, tilt_thetaB_group_in: rim}]
  10: [3.5, 2.5, 0, {preset: disk_left, rim_slope_match_group: rim, tilt_thetaB_group_in: rim}]
  11: [8.5, 3.5, 0, {preset: disk_right, rim_slope_match_group: rim, tilt_thetaB_group_in: rim}]
  12: [9.5, 3.5, 0, {preset: disk_right, rim_slope_match_group: rim, tilt_thetaB_group_in: rim}]
  13: [9.5, 2.5, 0, {preset: disk_right, rim_slope_match_group: rim, tilt_thetaB_group_in: rim}]
  14: [8.5, 2.5, 0, {preset: disk_right, rim_slope_match_group: rim, tilt_thetaB_group_in: rim}]

edges:
  1: [1, 2]
  2: [2, 3]
  3: [3, 4]
  4: [4, 5]
  5: [5, 6]
  6: [6, 1]
  7: [3, 6]
  8: [7, 8, {no_refine: true}]
  9: [8, 9, {no_refine: true}]
  10: [9, 10, {no_refine: true}]
  11: [10, 7, {no_refine: true}]
  12: [1, 7]
  13: [2, 8]
  14: [3, 9]
  15: [6, 10]
  16: [3, 11]
  17: [4, 12]
  18: [5, 13]
  19: [6, 14]
  20: [14, 11, {no_refine: true}]
  21: [11, 12, {no_refine: true}]
  22: [12, 13, {no_refine: true}]
  23: [13, 14, {no_refine: true}]

faces:
  # TODO: make sure all normals point up!
  1: [12, 8, -13, -1]
  2: [13, 9, -14, -2]
  3: [14, 10, -15, -7]
  4: [15, 11, -12, -6]
  5: [-8, -11, -10, -9]
  6: [19, 20, -16, 7]
  7: [16, 21, -17, -3]
  8: [17, 22, -18, -4]
  9: [18, 23, -19, -5]
  10: [-22, -21, -20, -23]

macros:
  profile_relax_light:
    - print msg Running profile_relax_light (two holes).
    - g10
    - tstat in
    - tstat out
    - energy
